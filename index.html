<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Formatura360</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">

<style>
:root {
  --card:#fff;
  --primary:#0f172a;
  --secondary:#64748b;
  --accent:#6366f1;
  --border:#e5e7eb;
  --danger:#ef4444;
  --percent:0deg;
}

*{box-sizing:border-box}

body{
  margin:0;
  font-family:Inter,sans-serif;
  background:linear-gradient(180deg,#f8fafc,#eef2ff);
  color:var(--primary)
}

header{
  background:rgba(255,255,255,.85);
  backdrop-filter:blur(12px);
  padding:20px 40px;
  border-bottom:1px solid var(--border);
  display:flex;
  justify-content:space-between;
  align-items:center;
  position:sticky;
  top:0
}

nav button{
  margin-left:8px;
  padding:10px 16px;
  border-radius:10px;
  border:none;
  background:transparent;
  cursor:pointer;
  color:var(--secondary);
  font-weight:500
}

nav button.active{
  background:var(--accent);
  color:#fff
}

main{
  max-width:1200px;
  margin:auto;
  padding:40px
}

.hidden{display:none}

.cards{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(220px,1fr));
  gap:20px
}

.card{
  background:var(--card);
  padding:24px;
  border-radius:16px;
  border:1px solid var(--border);
  box-shadow:0 10px 24px rgba(0,0,0,.05)
}

.dashboard-grid{
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:24px;
  margin-top:24px
}

.countdown-box{
  display:flex;
  justify-content:space-between;
  align-items:center
}

.countdown-icon{
  font-size:64px;
  opacity:.15
}

.budget-circle{
  width:150px;
  height:150px;
  border-radius:50%;
  background:conic-gradient(var(--accent) 0deg,var(--accent) var(--percent),#e5e7eb var(--percent));
  display:flex;
  align-items:center;
  justify-content:center;
  margin:16px auto
}

.budget-circle span{
  background:#fff;
  width:90px;
  height:90px;
  border-radius:50%;
  display:flex;
  align-items:center;
  justify-content:center;
  font-weight:700
}

input{
  width:100%;
  padding:12px;
  border-radius:10px;
  border:1px solid var(--border);
  margin-top:8px
}

button.primary{
  margin-top:12px;
  background:var(--accent);
  color:#fff;
  border:none;
  border-radius:10px;
  padding:12px;
  font-weight:600;
  cursor:pointer
}

table{
  width:100%;
  margin-top:24px;
  border-collapse:collapse;
  background:#fff;
  border-radius:16px;
  overflow:hidden
}

th,td{
  padding:14px;
  border-bottom:1px solid var(--border)
}

th{background:#f1f5f9}

td button{
  background:none;
  border:none;
  color:var(--danger);
  cursor:pointer;
  font-size:16px
}
</style>
</head>

<body>

<header>
  <h2>üéì Formatura360</h2>
  <nav>
    <button id="btn-dashboard" class="active" onclick="show('dashboard')">Dashboard</button>
    <button id="btn-items" onclick="show('items')">Itens</button>
    <button id="btn-finance" onclick="show('finance')">Financeiro</button>
    <button onclick="logout()">Sair</button>
  </nav>
</header>

<main>

<section id="dashboard">
  <div class="cards">
    <div class="card"><h4>Total de Itens</h4><strong id="totalItems">0</strong></div>
    <div class="card"><h4>Pend√™ncias</h4><strong id="pendingItems">0</strong></div>
    <div class="card"><h4>Total Gasto</h4><strong id="totalSpent">R$ 0,00</strong></div>
    <div class="card"><h4>Dispon√≠vel</h4><strong id="available">R$ 0,00</strong></div>
  </div>

  <div class="dashboard-grid">
    <div>
      <div class="card">
        <div class="countdown-box">
          <div>
            <h3>Contagem Regressiva</h3>
            <input type="date" id="date">
            <p id="countdown"></p>
          </div>
          <div class="countdown-icon">üéì</div>
        </div>
      </div>

      <div class="card" style="margin-top:16px">
        <h3>Or√ßamento Total</h3>
        <input type="number" id="budgetInput">
        <button class="primary" onclick="setBudget()">Salvar</button>
      </div>
    </div>

    <div class="card">
      <h3>Vis√£o Geral do Or√ßamento</h3>
      <div class="budget-circle"><span id="budgetPercent">0%</span></div>
      <p><strong>Total:</strong> <span id="budgetTotalView">R$ 0,00</span></p>
      <p><strong>Comprometido:</strong> <span id="budgetUsedView">R$ 0,00</span></p>
      <p><strong>Livre:</strong> <span id="budgetFreeView">R$ 0,00</span></p>
    </div>
  </div>
</section>

<section id="items" class="hidden">
  <div class="card">
    <h3>Adicionar Item</h3>
    <input id="itemName" placeholder="Item">
    <input id="itemSupplier" placeholder="Fornecedor">
    <input id="itemValue" type="number" placeholder="Valor">
    <button class="primary" onclick="addItem()">Adicionar</button>
  </div>

  <table>
    <thead>
      <tr><th>Item</th><th>Fornecedor</th><th>Valor</th><th>Pago</th><th></th></tr>
    </thead>
    <tbody id="itemsTable"></tbody>
  </table>
</section>

<section id="finance" class="hidden">
  <div class="card">
    <h3>Adicionar Despesa</h3>
    <input id="financeName" placeholder="Descri√ß√£o">
    <input id="financeValue" type="number" placeholder="Valor">
    <button class="primary" onclick="addFinance()">Adicionar</button>
  </div>

  <table>
    <thead>
      <tr><th>Descri√ß√£o</th><th>Valor</th><th></th></tr>
    </thead>
    <tbody id="financeTable"></tbody>
  </table>
</section>

</main>

<script>
// ================= LOGIN =================
const USERNAME = "Formatura360";          // üëà DEFINA O USU√ÅRIO AQUI
const PASSWORD = "Aida123@"; // üëà DEFINA A SENHA AQUI

if (localStorage.getItem("auth") !== "ok") {
  document.body.innerHTML = `
  <div style="height:100vh;display:flex;align-items:center;justify-content:center">
    <div class="card" style="width:320px">
      <h2>üîê Formatura360</h2>
      <input id="u" placeholder="Usu√°rio">
      <input id="p" type="password" placeholder="Senha">
      <button class="primary" onclick="login()">Entrar</button>
    </div>
  </div>`;
  window.login = () => {
    if (u.value === USERNAME && p.value === PASSWORD) {
      localStorage.setItem("auth","ok");
      location.reload();
    } else alert("Login inv√°lido");
  };
  throw "";
}

function logout(){
  localStorage.removeItem("auth");
  location.reload();
}

// ================= SISTEMA =================
let budget = +localStorage.getItem("budget") || 0;
let items = JSON.parse(localStorage.getItem("items")) || [];
let finances = JSON.parse(localStorage.getItem("finances")) || [];

function show(p){
  dashboard.classList.add("hidden");
  itemsSection.classList.add("hidden");
  financeSection.classList.add("hidden");
  btnDashboard.classList.remove("active");
  btnItems.classList.remove("active");
  btnFinance.classList.remove("active");

  if(p==="dashboard"){dashboard.classList.remove("hidden");btnDashboard.classList.add("active")}
  if(p==="items"){itemsSection.classList.remove("hidden");btnItems.classList.add("active")}
  if(p==="finance"){financeSection.classList.remove("hidden");btnFinance.classList.add("active")}
}

const dashboard=document.getElementById("dashboard");
const itemsSection=document.getElementById("items");
const financeSection=document.getElementById("finance");
const btnDashboard=document.getElementById("btn-dashboard");
const btnItems=document.getElementById("btn-items");
const btnFinance=document.getElementById("btn-finance");

const money=v=>v.toLocaleString("pt-BR",{style:"currency",currency:"BRL"});

function update(){
  const used = items.filter(i=>i.paid).reduce((s,i)=>s+i.value,0)+finances.reduce((s,f)=>s+f.value,0);
  totalItems.textContent=items.length;
  pendingItems.textContent=items.filter(i=>!i.paid).length;
  totalSpent.textContent=money(used);
  available.textContent=money(budget-used);
  budgetTotalView.textContent=money(budget);
  budgetUsedView.textContent=money(used);
  budgetFreeView.textContent=money(budget-used);
  const pct=budget?Math.min(used/budget*360,360):0;
  document.documentElement.style.setProperty("--percent",pct+"deg");
  budgetPercent.textContent=budget?Math.round(used/budget*100)+"%":"0%";
}

function setBudget(){budget=+budgetInput.value;localStorage.setItem("budget",budget);update();}

function addItem(){
  items.push({name:itemName.value,supplier:itemSupplier.value,value:+itemValue.value,paid:false});
  save();
  itemName.value=itemSupplier.value=itemValue.value="";
}

function toggleItem(i){items[i].paid=!items[i].paid;save();}
function removeItem(i){items.splice(i,1);save();}
function renderItems(){
  itemsTable.innerHTML="";
  items.forEach((i,x)=>{
    itemsTable.innerHTML+=`<tr>
      <td>${i.name}</td><td>${i.supplier}</td><td>${money(i.value)}</td>
      <td><input type="checkbox" ${i.paid?"checked":""} onchange="toggleItem(${x})"></td>
      <td><button onclick="removeItem(${x})">üóë</button></td></tr>`;
  });
}

function addFinance(){
  finances.push({name:financeName.value,value:+financeValue.value});
  saveFinance();
  financeName.value=financeValue.value="";
}

function removeFinance(i){finances.splice(i,1);saveFinance();}
function renderFinance(){
  financeTable.innerHTML="";
  finances.forEach((f,i)=>{
    financeTable.innerHTML+=`<tr>
      <td>${f.name}</td><td>${money(f.value)}</td>
      <td><button onclick="removeFinance(${i})">üóë</button></td></tr>`;
  });
}

function save(){localStorage.setItem("items",JSON.stringify(items));renderItems();update();}
function saveFinance(){localStorage.setItem("finances",JSON.stringify(finances));renderFinance();update();}

date.onchange=()=>{localStorage.setItem("date",date.value);calc();}
function calc(){
  if(!date.value)return;
  const d=Math.ceil((new Date(date.value)-new Date())/86400000);
  countdown.textContent=d>=0?`Faltam ${d} dias para a formatura`:"Data passada";
}

date.value=localStorage.getItem("date")||"";
calc();renderItems();renderFinance();update();
</script>

</body>
</html>

